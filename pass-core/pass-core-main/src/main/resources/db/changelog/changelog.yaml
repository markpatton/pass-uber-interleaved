databaseChangeLog:
  -  changeSet:
       id:  1
       author:  russ-poetker
       preConditions:
         - onFail: MARK_RAN
         - not:
             - tableExists:
                tableName: pass_submission
       changes:
         - sqlFile:
             encoding: utf-8
             path: /db/changelog/schema/initial-schema.sql
             splitStatements: true
             stripComments: true
  -  changeSet:
       id:  2
       author:  mark-patton
       changes:
         - sqlFile:
             encoding: utf-8
             path: /db/changelog/schema/rc-external-ids.sql
             splitStatements: true
             stripComments: true
  - changeSet:
      id: 3
      author: russ-poetker
      changes:
        - sqlFile:
            encoding: utf-8
            path: /db/changelog/data/rc-ext-ids-migration.sql
            splitStatements: true
            stripComments: true
        - dropColumn:
            tableName: pass_repository_copy
            columns:
            - column:
                name: externalids
  -  changeSet:
       id:  4
       author:  mark-patton
       changes:
         - sqlFile:
             encoding: utf-8
             path: /db/changelog/schema/indices.sql
             splitStatements: true
             stripComments: true
  -  changeSet:
       id:  5
       author:  mark-patton
       preConditions:
         - dbms:
             type: postgresql
         - onFail: MARK_RAN
       changes:
         - sqlFile:
             encoding: utf-8
             path: /db/changelog/schema/postgres-pattern-indices.sql
             splitStatements: true
             stripComments: true

